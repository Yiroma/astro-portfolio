---
import FormattedSkillItem from "@/components/FormattedSkillItem.astro";
// icons
import BackIcon from "@assets/icons/BackIcon.astro";
import BrainIcon from "@assets/icons/BrainIcon.astro";
import FrontIcon from "@assets/icons/FrontIcon.astro";
import ProductIcon from "@assets/icons/ProductIcon.astro";

const skillsAndDescription = [
  {
    title: "Développement Full-Stack & Applications Web",
    description: [
      "Interfaces web **React**, **Next**, **Astro**, **TypeScript** et **TailwindCSS** responsive et mobile-first",
      "Intégration d'APIs **GraphQL** (Apollo Client) et **REST**, connexion aux services tiers",
      "Applications mobiles hybrides **React Native**",
      "Design systems et composants UI accessibles **Shadcn UI**, **Daisy UI**",
    ],
    icon: FrontIcon,
  },
  {
    title: "Architecture Back-end & Microservices",
    description: [
      "Conception d'architectures **microservices** scalables avec **Node.js** et **TypeScript**",
      "APIs **GraphQL** (Apollo Server, Type-GraphQL) et **REST** (Express)",
      "ORM **TypeORM** avec bases de données **PostgreSQL**, **MySQL**, **SQLite**",
      "Requêtes **SQL** complexes et optimisation des performances",
      "Cache **Redis**, Gateway **Nginx**, Authentification **JWT** et **Argon2**",
    ],
    icon: BackIcon,
  },
  {
    title: "Conception, UX/UI & Gestion de Projet",
    description: [
      "Modélisation **UML** (cas d'utilisation, classes, séquences) et architecture logicielle (**MVC**, **Clean Architecture**, composants, services)",
      "Wireframes, maquettes et prototypes avec **Figma**",
      "Optimisation de l'expérience utilisateur (**UX**)",
      "Méthodologie **Agile Scrum**, gestion de version **Git/GitHub**",
      "Méthodologie **Merise** pour la modélisation de bases de données relationnelles (**MCD**, **MLD**, **MPD**)",
    ],
    icon: BrainIcon,
  },
  {
    title: "DevOps, Tests & Qualité du Code",
    description: [
      "Conteneurisation **Docker** et orchestration **Docker Compose**",
      "CI/CD avec **GitHub Actions**, déploiement VPS/Cloud, hébergement VPS",
      "Tests statiques/unitaires & intégration (**Vitest**, **Jest**) et E2E (**Playwright**)",
      "Linting automatique et pre-commit hooks (**ESLint**, **Prettier**, **Husky**)",
      "Maintenance évolutive et corrective",
    ],
    icon: ProductIcon,
  },
];
---

<section id="skills" class="px-4">
  <h2 class="text-4xl font-bold">Mes compétences</h2>

  {
    skillsAndDescription.map((skill, index) => (
      <div class="collapse-arrow collapse my-4 border border-base-content/5 bg-base-100 shadow-sm">
        <input
          type="radio"
          name="skills-accordion"
          id={`skill-${index}`}
          value={index}
          class="sr-only"
        />
        <label
          for={`skill-${index}`}
          id={`skill-button-${index}`}
          class="collapse-title flex cursor-pointer items-center gap-4 text-lg font-semibold md:gap-8"
          tabindex="0"
          onkeydown="if(event.key==='Enter'||event.key===' '){this.click()}"
          onclick={`toggleAccordion(${index})`}
        >
          <skill.icon />
          {skill.title}
        </label>
        <div
          class="collapse-content"
          id={`skill-content-${index}`}
          role="region"
          aria-labelledby={`skill-button-${index}`}
        >
          <ul class="ml-4 list-disc">
            {skill.description.map((item) => (
              <li>
                <FormattedSkillItem text={item} />
              </li>
            ))}
          </ul>
        </div>
      </div>
    ))
  }
</section>

<script is:inline>
  // eslint-disable-next-line @typescript-eslint/no-unused-vars
  function toggleAccordion(index) {
    event.preventDefault();
    const input = document.getElementById(`skill-${index}`);
    const isCurrentlyExpanded = input.checked;

    document.querySelectorAll('input[name="skills-accordion"]').forEach((radio) => {
      radio.checked = false;
    });

    if (!isCurrentlyExpanded) {
      input.checked = true;
    }
  }
</script>
